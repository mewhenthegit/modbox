!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.modbox=t():e.modbox=t()}(self,(()=>(()=>{"use strict";var __webpack_modules__={473:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>LoaderMod});var _modapi__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(869);class LoaderMod extends _modapi__WEBPACK_IMPORTED_MODULE_0__.BL{constructor(){super(...arguments),this.name="JavaScript Loader",this.description="The default loader for modbox.",this.version="0.0.1",this.namespace="loader-js"}Load(data){try{let result=eval(`(function(){return ${data}})();`);return console.log(`(function(){return ${data}})();`),console.log(result),result}catch(e){return console.error(e),new _modapi__WEBPACK_IMPORTED_MODULE_0__.BL}}CanLoad(e){return e.endsWith(".js")}}},869:(e,t,o)=>{o.d(t,{BL:()=>d,j$:()=>c,Dg:()=>l});class r{constructor(){this._callbacks={}}on(e,t){this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t)}off(e,t){this._callbacks[e]&&this._callbacks[e].forEach(((o,r)=>{o===t&&this._callbacks[e].splice(r,1)}))}once(e,t){this.on(e,((...o)=>{t(o),this.off(e,arguments.callee)}))}emit(e,...t){this._callbacks[e]&&this._callbacks[e].forEach((e=>e(...t)))}}class i{constructor(e,t,o){this.name=e,this.data=t,this.defaultaction=o,this.defaultPrevented=!1}preventDefault(){this.defaultPrevented=!0}run_default(...e){this.defaultPrevented||this.defaultaction(...e)}}var n,s;!function(e){e.deepClone=function e(t){let o=[];for(let r=0;r<t.length;r++){let i=t[r];"object"==typeof i&&(i=s.deepClone(i)),Array.isArray(i)&&(i=e(i)),o.push(i)}return o},e.remove=function(e,t){return t.splice(e,1)}}(n||(n={})),function(e){function t(e){for(let o in e){if("function"==typeof e[o])return!0;if("object"==typeof e[o])return t(e[o])}return!1}e.hasFunctions=t,e.deepClone=function e(o){if(window.structuredClone)return window.structuredClone(o);if(!t(o))return JSON.parse(JSON.stringify(o));let r={};for(let t in o)"object"!=typeof o[t]?Array.isArray(o[t])?r[t]=n.deepClone(o[t]):r[t]=o[t]:r[t]=e(o[t])}}(s||(s={}));let a=window;class d{init(){}constructor(){this.name="no name",this.description="no description",this.version="0.0.0",this.namespace="mod"}}class l extends d{constructor(){super(...arguments),this.name="ModAPI",this.description="An API for rmtrollbox mods",this.version="0.0.1",this.namespace="modapi",this.loaded=[],this.hooks={}}GetMod(e){let t=this.loaded.find((t=>t.namespace===e));if(!t)throw new Error(`Mod with namespace ${e} not found.`);return t}GetModByName(e){return this.loaded.find((t=>t.name===e))}GetMods(){return this.loaded}LoadMod(e){null==e&&$alert("Uh oh! Something went horribly wrong loading a mod!");let t=new e;this.loaded.find((e=>e.name===t.name))||(this.loaded.push(t),t.init())}ReplaceMod(e,t){let o=this.loaded.findIndex((t=>t.name===e.name));-1!==o&&(this.loaded[o]=t)}Hook(e){if(this.hooks[e])return this.hooks[e];let t=new r,o=a[e];return a[e]=async function(e,...o){let r=n.deepClone(o);t.emit("before_call",r);let s=new i("hooked_function_call",{funcargs:r},e);t.emit("call",s),await new Promise((e=>setTimeout(e,80))),s.run_default(...r),t.emit("after_call")}.bind(this,o),this.hooks[e]=t,t}FilterMods(e){return this.loaded.filter((t=>t.namespace.startsWith(e)))}}const c=new l}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var o=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](o,o.exports,__webpack_require__),o.exports}__webpack_require__.d=(e,t)=>{for(var o in t)__webpack_require__.o(t,o)&&!__webpack_require__.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Mod:()=>modapi.BL,ModAPI:()=>modapi.j$,ModAPI_C:()=>modapi.Dg});var modapi=__webpack_require__(869);class MBLogger extends modapi.BL{constructor(){super(...arguments),this.name="MBLogger",this.description="The default logger for modbox.",this.version="0.0.1",this.namespace="mblogger"}init(){}CreateLogger(e){return new Logger(e)}}class Logger{constructor(e){this.name=e}getTime(){let e=new Date;return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}`}log(...e){console.log(`[${this.getTime()}] [${this.name}]`,...e)}info(...e){console.info(`[${this.getTime()}] [${this.name}] [INFO]`,...e)}warn(...e){console.warn(`[${this.getTime()}] [${this.name}] [WARN]`,...e)}error(...e){console.error(`[${this.getTime()}] [${this.name}] [ERROR]`,...e)}}class trollbox extends modapi.BL{constructor(){super(...arguments),this.name="trollbox",this.description="trollbox API",this.version="0.0.1",this.namespace="trollbox",this.logger=modapi.j$.GetMod("mblogger").CreateLogger("trollbox"),this.registeredCommands=[]}init(){this.logger.log("Initializing trollbox API"),modapi.j$.Hook("sendMsg").on("call",(e=>{let t=e.data.funcargs[0];if(t.startsWith("/")){let o=t.substr(1).split(" "),r=o.shift(),i="";r.includes(":")&&(i=r.split(":")[0],r=r.split(":")[1]);let n=this.registeredCommands.filter((e=>i?e.namespace===i&&(e.name===r||e.aliases.includes(r)):e.name==r||e.aliases.includes(r)));n.length>0&&(e.preventDefault(),n[0].execute(o))}})),this.logger.info("trollbox api initialized"),this.PrintMessage({nick:"modbox",color:"green",home:"balls",date:Date.now(),msg:"Modbox active!"})}PrintMessage(e){window.printMsg(e)}RegisterCommand(e){this.registeredCommands.push(e)}GetElement(e){return document.querySelector(`#trollbox > ${e.GetSelector()}`)}}class UIElement{constructor(e,t){this.name=e,this.element=t,this._children=[]}GetSelector(){return this.element}SetChildren(e){return this._children=e.map((e=>(e.element=`${this.element} > ${e.element}`,e))),this}Get(e){let t=this._children.find((t=>t.name===e));if(!t)throw new Error(`No child named ${e}`);return t}get children(){return Object.fromEntries(this._children.map((e=>[e.name,e])))}}const UI={Form:new UIElement("Form","#trollbox_form").SetChildren([new UIElement("Input","textarea#trollbox_input"),new UIElement("SendButton","button"),new UIElement("NickButton","button#trollbox_nick_btn"),new UIElement("UploadButton","button#trollbox_upload_btn")])};class ModStorage extends modapi.BL{constructor(){super(...arguments),this.name="ModStorage",this.description="A mod that stores mod data",this.version="0.0.1",this.namespace="storage"}init(){}GetStorage(e){return new StorageData(e)}}class StorageData{constructor(e){this.name=e}Get(e,t){$db.get(`modbox/${this.name}/${e}`,((e,o)=>{console.log(e,o),t(o)}))}Set(e,t){$db.set(`modbox/${this.name}/${e}`,t)}Remove(e){$db.del(`modbox/${this.name}/${e}`)}List(e){return $db.keys(((t,o)=>{let r=[];for(let e=0;e<o.length;e++)o[e].startsWith("modbox/"+this.name+"/")&&r.push(o[e].replace(`modbox/${this.name}/`,""));e(r)}))}Clear(){this.List((e=>{e.forEach((e=>{this.Remove(e)}))}))}}var loader_js=__webpack_require__(473);const ModBox={ModAPI:modapi.j$,Mod:modapi.BL};class ModLoader extends modapi.BL{constructor(){super(...arguments),this.name="Mod Loader",this.description="A mod that loads mods",this.version="0.0.1",this.namespace="modloader",this.logger=modapi.j$.GetMod("mblogger").CreateLogger("modloader")}init(){this.logger.info("Loading mods...");let e=modapi.j$.GetMod("storage").GetStorage("mods");e.List((t=>{this.logger.info(`Found ${t.length} mods`);for(let o=0;o<t.length;o++){let r=t[o];e.Get(r,(e=>{this.logger.info(`Loading ${r}`);let t=modapi.j$.FilterMods("loader-"),o=!1;for(let i of t)if(i.CanLoad(r)){this.logger.info(`Loading mod ${r} with loader ${i.name}`),modapi.j$.LoadMod(i.Load(e)),this.logger.info(`Loaded ${r}`),o=!0;break}o||this.logger.error(`Could not load mod ${r}: no loader found for it`)}))}})),this.logger.info(`${modapi.j$.GetMods().length} Mods loaded`)}}return window.modbox=ModBox,window.modbox.ModAPI.LoadMod(MBLogger),window.modbox.ModAPI.LoadMod(trollbox),window.modbox.ModAPI.LoadMod(ModStorage),window.modbox.ModAPI.LoadMod(loader_js.A),window.modbox.ModAPI.LoadMod(ModLoader),__webpack_exports__})()));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVV4QixxQkFDekMsRSxPQU1KTyxPQUFPcUksT0FBU04sT0FLaEIvSCxPQUFPcUksT0FBTzVGLE9BQU92QixRQUFRNEMsVUFFN0I5RCxPQUFPcUksT0FBTzVGLE9BQU92QixRQUFRd0QsVUFFN0IxRSxPQUFPcUksT0FBTzVGLE9BQU92QixRQUFROEYsWUFFN0JoSCxPQUFPcUksT0FBTzVGLE9BQU92QixRQUFRLGFBRTdCbEIsT0FBT3FJLE9BQU81RixPQUFPdkIsUUFBUThHLFciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tb2Rib3gvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL21vZGJveC8uL3NyYy9sb2FkZXItanMudHMiLCJ3ZWJwYWNrOi8vbW9kYm94Ly4vc3JjL2V2ZW50cy50cyIsIndlYnBhY2s6Ly9tb2Rib3gvLi9zcmMvdXRpbC50cyIsIndlYnBhY2s6Ly9tb2Rib3gvLi9zcmMvbW9kYXBpLnRzIiwid2VicGFjazovL21vZGJveC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9tb2Rib3gvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL21vZGJveC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL21vZGJveC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL21vZGJveC8uL3NyYy9tYmxvZ2dlci50cyIsIndlYnBhY2s6Ly9tb2Rib3gvLi9zcmMvdHJvbGxib3gudHMiLCJ3ZWJwYWNrOi8vbW9kYm94Ly4vc3JjL21vZHN0b3JhZ2UudHMiLCJ3ZWJwYWNrOi8vbW9kYm94Ly4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIm1vZGJveFwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJtb2Rib3hcIl0gPSBmYWN0b3J5KCk7XG59KShzZWxmLCAoKSA9PiB7XG5yZXR1cm4gIiwiaW1wb3J0IHsgTW9kIH0gZnJvbSBcIi4vbW9kYXBpXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2FkZXJNb2QgZXh0ZW5kcyBNb2Qge1xuICAgIHB1YmxpYyBuYW1lOiBzdHJpbmcgPSBcIkphdmFTY3JpcHQgTG9hZGVyXCI7XG4gICAgcHVibGljIGRlc2NyaXB0aW9uOiBzdHJpbmcgPSBcIlRoZSBkZWZhdWx0IGxvYWRlciBmb3IgbW9kYm94LlwiO1xuICAgIHB1YmxpYyB2ZXJzaW9uOiBzdHJpbmcgPSBcIjAuMC4xXCI7XG4gICAgcHVibGljIG5hbWVzcGFjZTogc3RyaW5nID0gXCJsb2FkZXItanNcIjtcbiAgICBMb2FkKGRhdGE6IHN0cmluZyk6IE1vZCB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gZXZhbChgKGZ1bmN0aW9uKCl7cmV0dXJuICR7ZGF0YX19KSgpO2ApO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYChmdW5jdGlvbigpe3JldHVybiAke2RhdGF9fSkoKTtgKVxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBNb2Q7XG4gICAgICAgIH1cbiAgICB9XG4gICAgQ2FuTG9hZChmaWxlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGZpbGUuZW5kc1dpdGgoXCIuanNcIik7XG4gICAgfVxufSIsImludGVyZmFjZSBjYWxsYmFja2R1YyB7XG4gICAgW2tleTogc3RyaW5nXTogRnVuY3Rpb25bXTtcbn1cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEV2ZW50RW1pdHRlciB7XG4gICAgcHVibGljIF9jYWxsYmFja3M6IGNhbGxiYWNrZHVjO1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLl9jYWxsYmFja3MgPSB7fTtcbiAgICB9XG4gICAgb24oZXZlbnROYW1lOiBzdHJpbmcsIGNhbGxiYWNrOiBGdW5jdGlvbikge1xuICAgICAgICBpZiAoIXRoaXMuX2NhbGxiYWNrc1tldmVudE5hbWVdKSB0aGlzLl9jYWxsYmFja3NbZXZlbnROYW1lXSA9IFtdO1xuICAgICAgICB0aGlzLl9jYWxsYmFja3NbZXZlbnROYW1lXS5wdXNoKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgb2ZmKGV2ZW50TmFtZTogc3RyaW5nLCBjYWxsYmFjazogRnVuY3Rpb24pIHtcbiAgICAgICAgaWYgKCF0aGlzLl9jYWxsYmFja3NbZXZlbnROYW1lXSkgcmV0dXJuO1xuICAgICAgICB0aGlzLl9jYWxsYmFja3NbZXZlbnROYW1lXS5mb3JFYWNoKCh2YWx1ZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gY2FsbGJhY2spIHRoaXMuX2NhbGxiYWNrc1tldmVudE5hbWVdLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH0pXG4gICAgfVxuICAgIG9uY2UoZXZlbnROYW1lOiBzdHJpbmcsIGNhbGxiYWNrOiBGdW5jdGlvbikge1xuICAgICAgICB0aGlzLm9uKGV2ZW50TmFtZSwgKC4uLmQ6IGFueVtdKSA9PiB7XG4gICAgICAgICAgICBjYWxsYmFjayhkKTtcbiAgICAgICAgICAgIHRoaXMub2ZmKGV2ZW50TmFtZSwgYXJndW1lbnRzLmNhbGxlZSk7XG4gICAgICAgIH0pXG4gICAgfVxuICAgIGVtaXQoZXZlbnROYW1lOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICAgIGlmICghdGhpcy5fY2FsbGJhY2tzW2V2ZW50TmFtZV0pIHJldHVybjtcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzW2V2ZW50TmFtZV0uZm9yRWFjaCh4ID0+IHgoLi4uYXJncykpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBFdmVudCB7XG4gICAgcHVibGljIGRlZmF1bHRQcmV2ZW50ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgbmFtZTogc3RyaW5nLCBwdWJsaWMgZGF0YTogYW55LCBwdWJsaWMgZGVmYXVsdGFjdGlvbjogRnVuY3Rpb24pIHt9O1xuICAgIHByZXZlbnREZWZhdWx0KCkge1xuICAgICAgICB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQgPSB0cnVlO1xuICAgIH1cbiAgICBydW5fZGVmYXVsdCguLi5hcmdzOiBhbnlbXSkge1xuICAgICAgICBpZiAoIXRoaXMuZGVmYXVsdFByZXZlbnRlZCkgdGhpcy5kZWZhdWx0YWN0aW9uKC4uLmFyZ3MpO1xuICAgIH1cbn0iLCJleHBvcnQgZnVuY3Rpb24gc2xlZXAobXM6IG51bWJlcikge3JldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKX07XG5leHBvcnQgbmFtZXNwYWNlIGFycmF5IHtcbiAgICBleHBvcnQgZnVuY3Rpb24gZGVlcENsb25lKGFycjogYW55W10pOiBhbnlbXSB7XG4gICAgICAgIGxldCBuZXdhcnI6IGFueVtdID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgZGF0YSA9IGFycltpXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gXCJvYmplY3RcIikgZGF0YSA9IG9iamVjdC5kZWVwQ2xvbmUoZGF0YSk7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkgZGF0YSA9IGRlZXBDbG9uZShkYXRhKTtcbiAgICAgICAgICAgIG5ld2Fyci5wdXNoKGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdhcnI7XG4gICAgfTtcbiAgICBleHBvcnQgZnVuY3Rpb24gcmVtb3ZlKGluZGV4OiBudW1iZXIsIGFycjogYW55W10pe1xuICAgICAgICByZXR1cm4gYXJyLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxufVxuZXhwb3J0IG5hbWVzcGFjZSBvYmplY3Qge1xuICAgIGV4cG9ydCBmdW5jdGlvbiBoYXNGdW5jdGlvbnMob2JqOiBhbnkpOiBib29sZWFuIHtcbiAgICAgICAgZm9yIChsZXQgaXRlbSBpbiBvYmopIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqW2l0ZW1dID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmpbaXRlbV0gPT09IFwib2JqZWN0XCIpIHJldHVybiBoYXNGdW5jdGlvbnMob2JqW2l0ZW1dKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV4cG9ydCBmdW5jdGlvbiBkZWVwQ2xvbmUob2JqOiBhbnkpOiBhbnkge1xuICAgICAgICBpZiAoKHdpbmRvdyBhcyBhbnkpLnN0cnVjdHVyZWRDbG9uZSkgcmV0dXJuICh3aW5kb3cgYXMgYW55KS5zdHJ1Y3R1cmVkQ2xvbmUob2JqKVxuICAgICAgICBpZiAoIWhhc0Z1bmN0aW9ucyhvYmopKSByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKTtcbiAgICAgICAgbGV0IG5ld29iajogYW55ID0ge307XG4gICAgICAgIGZvciAobGV0IGl0ZW0gaW4gb2JqKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9ialtpdGVtXSA9PT0gXCJvYmplY3RcIikge25ld29ialtpdGVtXSA9IGRlZXBDbG9uZShvYmpbaXRlbV0pOyBjb250aW51ZX1cbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9ialtpdGVtXSkpIHtuZXdvYmpbaXRlbV0gPSBhcnJheS5kZWVwQ2xvbmUob2JqW2l0ZW1dKTsgY29udGludWV9XG4gICAgICAgICAgICBuZXdvYmpbaXRlbV0gPSBvYmpbaXRlbV07XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IEV2ZW50RW1pdHRlciwgeyBFdmVudCB9IGZyb20gXCIuL2V2ZW50c1wiO1xuaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuL3V0aWwnO1xubGV0IHdpbm8gPSB3aW5kb3cgYXMgYW55O1xuXG5leHBvcnQgY2xhc3MgTW9kIHtcbiAgICBwdWJsaWMgbmFtZTogc3RyaW5nID0gXCJubyBuYW1lXCI7XG4gICAgcHVibGljIGRlc2NyaXB0aW9uOiBzdHJpbmcgPSBcIm5vIGRlc2NyaXB0aW9uXCI7XG4gICAgcHVibGljIHZlcnNpb246IHN0cmluZyA9IFwiMC4wLjBcIjtcbiAgICBwdWJsaWMgbmFtZXNwYWNlOiBzdHJpbmcgPSBcIm1vZFwiO1xuICAgIGluaXQoKSB7fVxuICAgIGNvbnN0cnVjdG9yKCl7fTtcbn1cbmV4cG9ydCBjbGFzcyBNb2RBUElfQyBleHRlbmRzIE1vZCB7XG4gICAgcHVibGljIG5hbWU6IHN0cmluZyA9IFwiTW9kQVBJXCI7XG4gICAgcHVibGljIGRlc2NyaXB0aW9uOiBzdHJpbmcgPSBcIkFuIEFQSSBmb3Igcm10cm9sbGJveCBtb2RzXCI7XG4gICAgcHVibGljIHZlcnNpb246IHN0cmluZyA9IFwiMC4wLjFcIjtcbiAgICBwdWJsaWMgbmFtZXNwYWNlOiBzdHJpbmcgPSBcIm1vZGFwaVwiO1xuICAgIHByaXZhdGUgbG9hZGVkOiBNb2RbXSA9IFtdO1xuICAgIHByaXZhdGUgaG9va3M6IHtba2V5OiBzdHJpbmddOiBFdmVudEVtaXR0ZXJ9ID0ge307XG4gICAgcHVibGljIEdldE1vZDxUPihuYW1lc3BhY2U6IHN0cmluZykge1xuICAgICAgICBsZXQgYSA9IHRoaXMubG9hZGVkLmZpbmQoeCA9PiB4Lm5hbWVzcGFjZSA9PT0gbmFtZXNwYWNlKTtcbiAgICAgICAgaWYgKCFhKSB0aHJvdyBuZXcgRXJyb3IoYE1vZCB3aXRoIG5hbWVzcGFjZSAke25hbWVzcGFjZX0gbm90IGZvdW5kLmApO1xuICAgICAgICByZXR1cm4gYSBhcyB1bmtub3duIGFzIFQ7XG4gICAgfVxuICAgIHB1YmxpYyBHZXRNb2RCeU5hbWUobmFtZTogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvYWRlZC5maW5kKHggPT4geC5uYW1lID09PSBuYW1lKTtcbiAgICB9XG4gICAgcHVibGljIEdldE1vZHMoKTogTW9kW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2FkZWQ7XG4gICAgfVxuICAgIHB1YmxpYyBMb2FkTW9kKG1vZDogYW55KSB7XG4gICAgICAgIGlmIChtb2QgPT0gbnVsbCkge1xuICAgICAgICAgICAgLy9AdHMtaWdub3JlXG4gICAgICAgICAgICAkYWxlcnQoXCJVaCBvaCEgU29tZXRoaW5nIHdlbnQgaG9ycmlibHkgd3JvbmcgbG9hZGluZyBhIG1vZCFcIik7XG4gICAgICAgICAgICAvLyByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxtb2Q6IE1vZCA9IG5ldyBtb2QoKTtcbiAgICAgICAgaWYgKHRoaXMubG9hZGVkLmZpbmQoeCA9PiB4Lm5hbWUgPT09IGxtb2QubmFtZSkpIHJldHVybjtcbiAgICAgICAgdGhpcy5sb2FkZWQucHVzaChsbW9kKTtcbiAgICAgICAgbG1vZC5pbml0KCk7XG4gICAgICAgIC8vIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBwdWJsaWMgUmVwbGFjZU1vZChtb2Q6IE1vZCwgbmV3bW9kOiBNb2QpIHtcbiAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5sb2FkZWQuZmluZEluZGV4KHggPT4geC5uYW1lID09PSBtb2QubmFtZSk7XG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHJldHVybjtcbiAgICAgICAgdGhpcy5sb2FkZWRbaW5kZXhdID0gbmV3bW9kO1xuICAgIH1cbiAgICBwdWJsaWMgSG9vayhmdW5jdGlvbl9uYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHRoaXMuaG9va3NbZnVuY3Rpb25fbmFtZV0pIHJldHVybiB0aGlzLmhvb2tzW2Z1bmN0aW9uX25hbWVdO1xuICAgICAgICBsZXQgZXZlbSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgbGV0IG9nZnVuYyA9IHdpbm9bZnVuY3Rpb25fbmFtZV07XG4gICAgICAgIHdpbm9bZnVuY3Rpb25fbmFtZV0gPSAoYXN5bmMgZnVuY3Rpb24gKG9nZnVuYzogRnVuY3Rpb24sIC4uLmZhcmdzOiBhbnlbXSkge1xuICAgICAgICAgICAgbGV0IG5hcmdzID0gdXRpbC5hcnJheS5kZWVwQ2xvbmUoZmFyZ3MpO1xuICAgICAgICAgICAgZXZlbS5lbWl0KCdiZWZvcmVfY2FsbCcsIG5hcmdzKTsgLy8geW91IGNhbiB1c2UgYmVmb3JlIGNhbGwgdG8gcXVpY2tseSBtb2RpZnkgdGhlIGFyZ3VtZW50c1xuICAgICAgICAgICAgbGV0IGZldmVudCA9IG5ldyBFdmVudCgnaG9va2VkX2Z1bmN0aW9uX2NhbGwnLCB7ZnVuY2FyZ3M6IG5hcmdzfSwgb2dmdW5jKTtcbiAgICAgICAgICAgIGV2ZW0uZW1pdCgnY2FsbCcsZmV2ZW50KTtcbiAgICAgICAgICAgIGF3YWl0IHV0aWwuc2xlZXAoODApO1xuICAgICAgICAgICAgZmV2ZW50LnJ1bl9kZWZhdWx0KC4uLm5hcmdzKTtcbiAgICAgICAgICAgIGV2ZW0uZW1pdChcImFmdGVyX2NhbGxcIik7XG4gICAgICAgIH0pLmJpbmQodGhpcywgb2dmdW5jKTtcbiAgICAgICAgdGhpcy5ob29rc1tmdW5jdGlvbl9uYW1lXSA9IGV2ZW07XG4gICAgICAgIHJldHVybiBldmVtO1xuICAgIH1cbiAgICBwdWJsaWMgRmlsdGVyTW9kczxUPihwcmVmaXg6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2FkZWQuZmlsdGVyKHggPT4geC5uYW1lc3BhY2Uuc3RhcnRzV2l0aChwcmVmaXgpKSBhcyB1bmtub3duIGFzIFRbXTtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgTW9kQVBJID0gbmV3IE1vZEFQSV9DKCk7IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJpbXBvcnQgeyBNb2QgfSBmcm9tIFwiLi9tb2RhcGlcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1CTG9nZ2VyIGV4dGVuZHMgTW9kIHtcbiAgICBwdWJsaWMgbmFtZTogc3RyaW5nID0gXCJNQkxvZ2dlclwiO1xuICAgIHB1YmxpYyBkZXNjcmlwdGlvbjogc3RyaW5nID0gXCJUaGUgZGVmYXVsdCBsb2dnZXIgZm9yIG1vZGJveC5cIjtcbiAgICBwdWJsaWMgdmVyc2lvbjogc3RyaW5nID0gXCIwLjAuMVwiO1xuICAgIHB1YmxpYyBuYW1lc3BhY2U6IHN0cmluZyA9IFwibWJsb2dnZXJcIjtcbiAgICBwdWJsaWMgaW5pdCgpIHt9XG4gICAgcHVibGljIENyZWF0ZUxvZ2dlcihuYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMb2dnZXIobmFtZSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIExvZ2dlciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIG5hbWU6IHN0cmluZykge31cbiAgICBwcml2YXRlIGdldFRpbWUoKSB7XG4gICAgICAgIGxldCBkID0gbmV3IERhdGUoKTtcbiAgICAgICAgbGV0IGhvdXIgPSBkLmdldEhvdXJzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIik7XG4gICAgICAgIGxldCBtaW51dGUgPSBkLmdldE1pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcbiAgICAgICAgbGV0IHNlY29uZCA9IGQuZ2V0U2Vjb25kcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpO1xuICAgICAgICByZXR1cm4gYCR7aG91cn06JHttaW51dGV9OiR7c2Vjb25kfWA7XG4gICAgfVxuICAgIHB1YmxpYyBsb2coLi4uYXJnczogYW55W10pIHtcbiAgICAgICAgY29uc29sZS5sb2coYFske3RoaXMuZ2V0VGltZSgpfV0gWyR7dGhpcy5uYW1lfV1gLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgcHVibGljIGluZm8oLi4uYXJnczogYW55W10pIHtcbiAgICAgICAgY29uc29sZS5pbmZvKGBbJHt0aGlzLmdldFRpbWUoKX1dIFske3RoaXMubmFtZX1dIFtJTkZPXWAsIC4uLmFyZ3MpO1xuICAgIH1cbiAgICBwdWJsaWMgd2FybiguLi5hcmdzOiBhbnlbXSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYFske3RoaXMuZ2V0VGltZSgpfV0gWyR7dGhpcy5uYW1lfV0gW1dBUk5dYCwgLi4uYXJncyk7XG4gICAgfVxuICAgIHB1YmxpYyBlcnJvciguLi5hcmdzOiBhbnlbXSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBbJHt0aGlzLmdldFRpbWUoKX1dIFske3RoaXMubmFtZX1dIFtFUlJPUl1gLCAuLi5hcmdzKTtcbiAgICB9XG59IiwiaW1wb3J0IHsgTW9kLCBNb2RBUEkgfSBmcm9tIFwiLi9tb2RhcGlcIjtcbmltcG9ydCBNQkxvZ2dlciBmcm9tIFwiLi9tYmxvZ2dlclwiO1xuaW1wb3J0IEV2ZW50RW1pdHRlciwge0V2ZW50fSBmcm9tIFwiLi9ldmVudHNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlIHtcbiAgICBuaWNrOiBzdHJpbmc7XG4gICAgaG9tZTogc3RyaW5nO1xuICAgIG1zZzogc3RyaW5nO1xuICAgIGRhdGU6IG51bWJlcjtcbiAgICBjb2xvcjogc3RyaW5nO1xufVxuZXhwb3J0IGludGVyZmFjZSBDb21tYW5kIHtcbiAgICBuYW1lc3BhY2U6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICB1c2FnZTogc3RyaW5nO1xuICAgIGFsaWFzZXM6IHN0cmluZ1tdO1xuICAgIGV4ZWN1dGU6IChhcmdzOiBzdHJpbmdbXSkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgdHJvbGxib3ggZXh0ZW5kcyBNb2Qge1xuICAgIHB1YmxpYyBuYW1lOiBzdHJpbmcgPSBcInRyb2xsYm94XCI7XG4gICAgcHVibGljIGRlc2NyaXB0aW9uOiBzdHJpbmcgPSBcInRyb2xsYm94IEFQSVwiO1xuICAgIHB1YmxpYyB2ZXJzaW9uOiBzdHJpbmcgPSBcIjAuMC4xXCI7XG4gICAgcHVibGljIG5hbWVzcGFjZTogc3RyaW5nID0gXCJ0cm9sbGJveFwiO1xuICAgIHB1YmxpYyBsb2dnZXIgPSBNb2RBUEkuR2V0TW9kPE1CTG9nZ2VyPihcIm1ibG9nZ2VyXCIpLkNyZWF0ZUxvZ2dlcihcInRyb2xsYm94XCIpO1xuICAgIHByaXZhdGUgcmVnaXN0ZXJlZENvbW1hbmRzOiBDb21tYW5kW10gPSBbXTtcbiAgICBwdWJsaWMgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKFwiSW5pdGlhbGl6aW5nIHRyb2xsYm94IEFQSVwiKTtcbiAgICAgICAgbGV0IHNuZE1zZ0hvb2sgPSBNb2RBUEkuSG9vayhcInNlbmRNc2dcIik7XG4gICAgICAgIHNuZE1zZ0hvb2sub24oXCJjYWxsXCIsIChldjogRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGxldCBtc2cgPSBldi5kYXRhLmZ1bmNhcmdzWzBdO1xuICAgICAgICAgICAgaWYgKG1zZy5zdGFydHNXaXRoKCcvJykpIHtcbiAgICAgICAgICAgICAgICBsZXQgYXJncyA9IG1zZy5zdWJzdHIoMSkuc3BsaXQoJyAnKTtcbiAgICAgICAgICAgICAgICBsZXQgY21kID0gYXJncy5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIGxldCBuYW1lc3BhY2UgPSBcIlwiO1xuICAgICAgICAgICAgICAgIGlmIChjbWQuaW5jbHVkZXMoJzonKSkge1xuICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2UgPSBjbWQuc3BsaXQoJzonKVswXTtcbiAgICAgICAgICAgICAgICAgICAgY21kID0gY21kLnNwbGl0KCc6JylbMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBjbWRzID0gdGhpcy5yZWdpc3RlcmVkQ29tbWFuZHMuZmlsdGVyKGMgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAobmFtZXNwYWNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYy5uYW1lc3BhY2UgPT09IG5hbWVzcGFjZSAmJiAoYy5uYW1lID09PSBjbWQgfHwgYy5hbGlhc2VzLmluY2x1ZGVzKGNtZCkpXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYy5uYW1lID09IGNtZCB8fCBjLmFsaWFzZXMuaW5jbHVkZXMoY21kKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGNtZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBjbWRzWzBdLmV4ZWN1dGUoYXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwidHJvbGxib3ggYXBpIGluaXRpYWxpemVkXCIpO1xuICAgICAgICB0aGlzLlByaW50TWVzc2FnZSh7XG4gICAgICAgICAgICBuaWNrOiBcIm1vZGJveFwiLFxuICAgICAgICAgICAgY29sb3I6IFwiZ3JlZW5cIixcbiAgICAgICAgICAgIGhvbWU6IFwiYmFsbHNcIixcbiAgICAgICAgICAgIGRhdGU6IERhdGUubm93KCksXG4gICAgICAgICAgICBtc2c6IFwiTW9kYm94IGFjdGl2ZSFcIlxuICAgICAgICB9KVxuICAgIH1cbiAgICBwdWJsaWMgUHJpbnRNZXNzYWdlKG1zZzogTWVzc2FnZSkge1xuICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgd2luZG93LnByaW50TXNnKG1zZyk7XG4gICAgfVxuICAgIHB1YmxpYyBSZWdpc3RlckNvbW1hbmQoY21kOiBDb21tYW5kKSB7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJlZENvbW1hbmRzLnB1c2goY21kKTtcbiAgICB9XG4gICAgcHVibGljIEdldEVsZW1lbnQodWllbGVtZW50OiBVSUVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCN0cm9sbGJveCA+ICR7dWllbGVtZW50LkdldFNlbGVjdG9yKCl9YCk7XG4gICAgfVxuICAgIC8vIHB1YmxpYyBPcGVuUG9wdXAoaHRtbDogc3RyaW5nKSB7IC8vIHByb2IgZG9lc250IGV4aXN0IGluIHRyb2xsYm94IGFueW1vcmVcbiAgICAvLyAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIC8vICAgICAgICAgLy9AdHMtaWdub3JlXG4gICAgLy8gICAgICAgICB3aW5kb3cucG9wdXAoaHRtbCxyZXNvbHZlKTsgLy8gcmVzb2x2ZSBnZXRzIGNhbGxlZCB3aGVuIHRoZSBwb3B1cCBpcyBvcGVuXG4gICAgLy8gICAgIH0pXG4gICAgLy8gfVxufVxuY2xhc3MgVUlFbGVtZW50IHtcbiAgICBwcml2YXRlIF9jaGlsZHJlbjogVUlFbGVtZW50W10gPSBbXTtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgbmFtZTogc3RyaW5nLCBwdWJsaWMgZWxlbWVudDogc3RyaW5nKSB7fVxuICAgIHB1YmxpYyBHZXRTZWxlY3RvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudDtcbiAgICB9XG4gICAgcHVibGljIFNldENoaWxkcmVuKGNoaWxkczogVUlFbGVtZW50W10pIHtcbiAgICAgICAgdGhpcy5fY2hpbGRyZW4gPSBjaGlsZHMubWFwKHggPT4ge1xuICAgICAgICAgICAgeC5lbGVtZW50ID0gYCR7dGhpcy5lbGVtZW50fSA+ICR7eC5lbGVtZW50fWA7XG4gICAgICAgICAgICByZXR1cm4geDtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBwdWJsaWMgR2V0KG5hbWU6IHN0cmluZykge1xuICAgICAgICBsZXQgYSA9IHRoaXMuX2NoaWxkcmVuLmZpbmQoeCA9PiB4Lm5hbWUgPT09IG5hbWUpO1xuICAgICAgICBpZiAoIWEpIHRocm93IG5ldyBFcnJvcihgTm8gY2hpbGQgbmFtZWQgJHtuYW1lfWApO1xuICAgICAgICByZXR1cm4gYTtcbiAgICB9XG4gICAgZ2V0IGNoaWxkcmVuKCk6IHtba2V5OiBzdHJpbmddOiBVSUVsZW1lbnR9IHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyh0aGlzLl9jaGlsZHJlbi5tYXAoeCA9PiBbeC5uYW1lLCB4XSkpXG4gICAgfVxufVxuLypleHBvcnQgY29uc3QgVUkgPSB7XG4gICAgRm9ybToge1xuICAgICAgICBfX2NvbWJpbmU6IFwiI3Ryb2xsYm94X2Zvcm1cIixcbiAgICAgICAgZ2V0IElucHV0KCkge1xuICAgICAgICAgICAgcmV0dXJuIGAke3RoaXMuX19jb21iaW5lfSA+IHRleHRhcmVhI3Ryb2xsYm94X2lucHV0YDtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0IFNlbmRCdXR0b24oKSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7dGhpcy5fX2NvbWJpbmV9ID4gYnV0dG9uYDtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0IE5pY2tCdXR0b24oKSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7dGhpcy5fX2NvbWJpbmV9ID4gYnV0dG9uI3Ryb2xsYm94X25pY2tfYnRuYDtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0IFVwbG9hZEJ1dHRvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLl9fY29tYmluZX0gPiBidXR0b24jdHJvbGxib3hfdXBsb2FkX2J0bmA7XG4gICAgICAgIH1cbiAgICB9XG59Ki9cbmV4cG9ydCBjb25zdCBVSSA9IHtcbiAgICBGb3JtOiBuZXcgVUlFbGVtZW50KFwiRm9ybVwiLCBcIiN0cm9sbGJveF9mb3JtXCIpLlNldENoaWxkcmVuKFtcbiAgICAgICAgbmV3IFVJRWxlbWVudChcIklucHV0XCIsIFwidGV4dGFyZWEjdHJvbGxib3hfaW5wdXRcIiksXG4gICAgICAgIG5ldyBVSUVsZW1lbnQoXCJTZW5kQnV0dG9uXCIsIFwiYnV0dG9uXCIpLFxuICAgICAgICBuZXcgVUlFbGVtZW50KFwiTmlja0J1dHRvblwiLCBcImJ1dHRvbiN0cm9sbGJveF9uaWNrX2J0blwiKSxcbiAgICAgICAgbmV3IFVJRWxlbWVudChcIlVwbG9hZEJ1dHRvblwiLCBcImJ1dHRvbiN0cm9sbGJveF91cGxvYWRfYnRuXCIpXG5cbiAgICBdKVxufVxuIiwiaW1wb3J0IHsgTW9kIH0gZnJvbSBcIi4vbW9kYXBpXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RTdG9yYWdlIGV4dGVuZHMgTW9kIHtcbiAgICBwdWJsaWMgbmFtZTogc3RyaW5nID0gXCJNb2RTdG9yYWdlXCI7XG4gICAgcHVibGljIGRlc2NyaXB0aW9uOiBzdHJpbmcgPSBcIkEgbW9kIHRoYXQgc3RvcmVzIG1vZCBkYXRhXCI7XG4gICAgcHVibGljIHZlcnNpb246IHN0cmluZyA9IFwiMC4wLjFcIjtcbiAgICBwdWJsaWMgbmFtZXNwYWNlOiBzdHJpbmcgPSBcInN0b3JhZ2VcIjtcbiAgICBwdWJsaWMgaW5pdCgpIHt9XG4gICAgcHVibGljIEdldFN0b3JhZ2UobmFtZTogc3RyaW5nKTogU3RvcmFnZURhdGEge1xuICAgICAgICByZXR1cm4gbmV3IFN0b3JhZ2VEYXRhKG5hbWUpO1xuICAgIH1cbn1cbmNsYXNzIFN0b3JhZ2VEYXRhIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgbmFtZTogc3RyaW5nKSB7fVxuICAgIHB1YmxpYyBHZXQoa2V5OiBzdHJpbmcsIGM6IEZ1bmN0aW9uKTogYW55IHtcbiAgICAgICAgLy9AdHMtaWdub3JlXG4gICAgICAgICRkYi5nZXQoYG1vZGJveC8ke3RoaXMubmFtZX0vJHtrZXl9YCwgKF8sIGNvbnRlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKF8sIGNvbnRlbnQpXG4gICAgICAgICAgICBjKGNvbnRlbnQpO1xuICAgICAgICB9KVxuICAgICAgICAvLyByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oYG1vZGJveC8ke3RoaXMubmFtZX0vJHtrZXl9YCk7XG4gICAgfVxuICAgIHB1YmxpYyBTZXQoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpIHtcbiAgICAgICAgLy9AdHMtaWdub3JlXG4gICAgICAgICRkYi5zZXQoYG1vZGJveC8ke3RoaXMubmFtZX0vJHtrZXl9YCx2YWx1ZSk7XG4gICAgICAgIC8vIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGBtb2Rib3gvJHt0aGlzLm5hbWV9LyR7a2V5fWAsIHZhbHVlKTtcbiAgICB9XG4gICAgcHVibGljIFJlbW92ZShrZXk6IHN0cmluZykge1xuICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgJGRiLmRlbChgbW9kYm94LyR7dGhpcy5uYW1lfS8ke2tleX1gKTtcbiAgICAgICAgLy8gbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oYG1vZGJveC8ke3RoaXMubmFtZX0vJHtrZXl9YCk7XG4gICAgfVxuICAgIHB1YmxpYyBMaXN0KGM6IEZ1bmN0aW9uKSB7XG4gICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICByZXR1cm4gJGRiLmtleXMoKF8sIGtleXM6IEFycmF5PFN0cmluZz4pID0+IHtcbiAgICAgICAgICAgIGxldCBtb2RzID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5c1tpXS5zdGFydHNXaXRoKFwibW9kYm94L1wiK3RoaXMubmFtZStcIi9cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kcy5wdXNoKGtleXNbaV0ucmVwbGFjZShgbW9kYm94LyR7dGhpcy5uYW1lfS9gLCBcIlwiKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYyhtb2RzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGxldCBrZXlzID0gT2JqZWN0LmtleXMobG9jYWxTdG9yYWdlKTtcbiAgICB9XG4gICAgcHVibGljIENsZWFyKCkge1xuICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgdGhpcy5MaXN0KChrZXlzKT0+IHtcbiAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICAgICAga2V5cy5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5SZW1vdmUoa2V5KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgIH1cbn0iLCJpbXBvcnQgeyBNb2RBUEksIE1vZCwgTW9kQVBJX0MgfSBmcm9tIFwiLi9tb2RhcGlcIjtcbmltcG9ydCBNQkxvZ2dlciwgeyBMb2dnZXIgfSBmcm9tIFwiLi9tYmxvZ2dlclwiO1xuaW1wb3J0IHRyb2xsYm94IGZyb20gXCIuL3Ryb2xsYm94XCI7XG5pbXBvcnQgTW9kU3RvcmFnZSBmcm9tIFwiLi9tb2RzdG9yYWdlXCI7XG5pbXBvcnQgTG9hZGVyTW9kIGZyb20gXCIuL2xvYWRlci1qc1wiO1xuXG50eXBlIFRNb2RCb3ggPSB7XG4gICAgTW9kQVBJOiBNb2RBUElfQ1xuICAgIE1vZDogYW55XG59XG5cbmNvbnN0IE1vZEJveDogVE1vZEJveCA9IHtcbiAgICBNb2RBUEk6IE1vZEFQSSxcbiAgICBNb2Q6IE1vZFxufVxuXG5jbGFzcyBNb2RMb2FkZXIgZXh0ZW5kcyBNb2Qge1xuICAgIHB1YmxpYyBuYW1lOiBzdHJpbmcgPSBcIk1vZCBMb2FkZXJcIjtcbiAgICBwdWJsaWMgZGVzY3JpcHRpb246IHN0cmluZyA9IFwiQSBtb2QgdGhhdCBsb2FkcyBtb2RzXCI7XG4gICAgcHVibGljIHZlcnNpb246IHN0cmluZyA9IFwiMC4wLjFcIjtcbiAgICBwdWJsaWMgbmFtZXNwYWNlOiBzdHJpbmcgPSBcIm1vZGxvYWRlclwiO1xuICAgIHByaXZhdGUgbG9nZ2VyID0gTW9kQVBJLkdldE1vZDxNQkxvZ2dlcj4oXCJtYmxvZ2dlclwiKS5DcmVhdGVMb2dnZXIoXCJtb2Rsb2FkZXJcIik7XG4gICAgcHVibGljIGluaXQoKSB7XG4gICAgICAgIC8qLy9AdHMtaWdub3JlXG4gICAgICAgIHdpbmRvdy5Nb2RBUEkgPSBNb2RBUEk7IC8vIGV4cG9zZSB0aGUgTW9kQVBJIHRvIHRoZSB3aW5kb3dcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbygnTW9kQVBJIGV4cG9zZWQgdG8gd2luZG93Jyk7XG4gICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICB3aW5kb3cuTW9kID0gTW9kO1xuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKCdNb2QgY2xhc3MgZXhwb3NlZCB0byB3aW5kb3cnKTsqL1xuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKCdMb2FkaW5nIG1vZHMuLi4nKTtcbiAgICAgICAgbGV0IG1vZHMgPSBNb2RBUEkuR2V0TW9kPE1vZFN0b3JhZ2U+KFwic3RvcmFnZVwiKS5HZXRTdG9yYWdlKFwibW9kc1wiKVxuICAgICAgICAvLyBsZXQgbW9kTGlzdCA9IG1vZHMuTGlzdCgpO1xuICAgICAgICBtb2RzLkxpc3QoKG1vZExpc3Q6IEFycmF5PHN0cmluZz4pPT57XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKGBGb3VuZCAke21vZExpc3QubGVuZ3RofSBtb2RzYCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1vZExpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgbW9kTmFtZTogc3RyaW5nID0gbW9kTGlzdFtpXVxuICAgICAgICAgICAgICAgIG1vZHMuR2V0KG1vZE5hbWUsIChtb2Q6IHN0cmluZyk9PntcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhgTG9hZGluZyAke21vZE5hbWV9YCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBsb2FkZXJzID0gTW9kQVBJLkZpbHRlck1vZHM8TG9hZGVyTW9kPihcImxvYWRlci1cIik7XG4gICAgICAgICAgICAgICAgICAgIGxldCBsb2FkZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgbG9hZGVyIG9mIGxvYWRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb2FkZXIuQ2FuTG9hZChtb2ROYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmluZm8oYExvYWRpbmcgbW9kICR7bW9kTmFtZX0gd2l0aCBsb2FkZXIgJHtsb2FkZXIubmFtZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb2RBUEkuTG9hZE1vZChsb2FkZXIuTG9hZChtb2QpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKGBMb2FkZWQgJHttb2ROYW1lfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFsb2FkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBDb3VsZCBub3QgbG9hZCBtb2QgJHttb2ROYW1lfTogbm8gbG9hZGVyIGZvdW5kIGZvciBpdGApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKGAke01vZEFQSS5HZXRNb2RzKCkubGVuZ3RofSBNb2RzIGxvYWRlZGApO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgTW9kLCBNb2RBUEksIE1vZEFQSV9DIH07XG5cbi8vQHRzLWlnbm9yZVxud2luZG93Lm1vZGJveCA9IE1vZEJveDtcblxuLy8gc2V0VGltZW91dCgoKSA9PiB7XG4vLyAgICAgYWxlcnQoXCJiYWxsc1wiKVxuLy9AdHMtaWdub3JlXG53aW5kb3cubW9kYm94Lk1vZEFQSS5Mb2FkTW9kKE1CTG9nZ2VyKTtcbi8vQHRzLWlnbm9yZVxud2luZG93Lm1vZGJveC5Nb2RBUEkuTG9hZE1vZCh0cm9sbGJveCk7XG4vL0B0cy1pZ25vcmVcbndpbmRvdy5tb2Rib3guTW9kQVBJLkxvYWRNb2QoTW9kU3RvcmFnZSk7XG4vL0B0cy1pZ25vcmVcbndpbmRvdy5tb2Rib3guTW9kQVBJLkxvYWRNb2QoTG9hZGVyTW9kKTtcbi8vQHRzLWlnbm9yZVxud2luZG93Lm1vZGJveC5Nb2RBUEkuTG9hZE1vZChNb2RMb2FkZXIpO1xuLy8gfSwgNTAwKVxuXG4vLyAvL0B0cy1pZ25vcmVcbi8vICRrZXJuZWwub24oXCJzcGxhc2g6cmVhZHlcIiwgKCk9PnsgLy8gcnVuIHdoZW4gdzkzIGJvb3RzXG4vLyAgICAgLy8gVE9ETzogbWFrZSB0aGlzIGxlc3Mgc2hpdHR5XG4vLyAgICAgLy8gYWxlcnQoXCJsYXVuY2hlZCFcIilcbi8vICAgICAvL0B0cy1pZ25vcmVcbi8vICAgICAvLyB3aW5kb3cubW9kYm94ID0gTW9kQm94O1xuLy8gICAgIC8vIHNldEludGVydmFsKCgpPT57XG4vLyAgICAgLy8gICAgIGZvcihsZXQgZnJhbWUgb2YgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpZnJhbWVcIikpIHtcbi8vICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKGZyYW1lLnNyYyk7XG4vLyAgICAgLy8gICAgICAgICBpZiAoZnJhbWUuc3JjID09IFwiaHR0cHM6Ly93d3cud2luZG93czkzLm5ldC90cm9sbGJveC9pbmRleC5waHBcIikge1xuLy8gICAgIC8vICAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxuLy8gICAgIC8vICAgICAgICAgICAgIGlmIChmcmFtZS5jb250ZW50V2luZG93Lm1vZGJveCAhPSBudWxsKSB7IGNvbnRpbnVlOyB9XG5cbi8vICAgICAvLyAgICAgICAgICAgICAvL0B0cy1pZ25vcmVcbi8vICAgICAvLyAgICAgICAgICAgICBmcmFtZS5jb250ZW50V2luZG93Lm1vZGJveCA9IE1vZEJveDtcblxuLy8gICAgIC8vICAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PiB7XG4vLyAgICAgLy8gICAgICAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxuLy8gICAgIC8vICAgICAgICAgICAgICAgICBmcmFtZS5jb250ZW50V2luZG93Lm1vZGJveC5Nb2RBUEkuTG9hZE1vZChNQkxvZ2dlcik7XG4vLyAgICAgLy8gICAgICAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxuLy8gICAgIC8vICAgICAgICAgICAgICAgICBmcmFtZS5jb250ZW50V2luZG93Lm1vZGJveC5Nb2RBUEkuTG9hZE1vZCh0cm9sbGJveCk7XG4vLyAgICAgLy8gICAgICAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxuLy8gICAgIC8vICAgICAgICAgICAgICAgICBmcmFtZS5jb250ZW50V2luZG93Lm1vZGJveC5Nb2RBUEkuTG9hZE1vZChNb2RTdG9yYWdlKTtcbi8vICAgICAvLyAgICAgICAgICAgICAgICAgLy9AdHMtaWdub3JlXG4vLyAgICAgLy8gICAgICAgICAgICAgICAgIGZyYW1lLmNvbnRlbnRXaW5kb3cubW9kYm94Lk1vZEFQSS5Mb2FkTW9kKExvYWRlck1vZCk7XG4vLyAgICAgLy8gICAgICAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxuLy8gICAgIC8vICAgICAgICAgICAgICAgICBmcmFtZS5jb250ZW50V2luZG93Lm1vZGJveC5Nb2RBUEkuTG9hZE1vZChNb2RMb2FkZXIpO1xuLy8gICAgIC8vICAgICAgICAgICAgIH0sNTAwKVxuLy8gICAgIC8vICAgICAgICAgfVxuLy8gICAgIC8vICAgICB9XG4vLyAgICAgLy8gfSlcbi8vIH0pIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInNlbGYiLCJMb2FkZXJNb2QiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJ2ZXJzaW9uIiwibmFtZXNwYWNlIiwiTG9hZCIsImRhdGEiLCJyZXN1bHQiLCJldmFsIiwiY29uc29sZSIsImxvZyIsImUiLCJlcnJvciIsIkNhbkxvYWQiLCJmaWxlIiwiZW5kc1dpdGgiLCJFdmVudEVtaXR0ZXIiLCJjb25zdHJ1Y3RvciIsInRoaXMiLCJfY2FsbGJhY2tzIiwib24iLCJldmVudE5hbWUiLCJjYWxsYmFjayIsInB1c2giLCJvZmYiLCJmb3JFYWNoIiwidmFsdWUiLCJpbmRleCIsInNwbGljZSIsIm9uY2UiLCJkIiwiYXJndW1lbnRzIiwiY2FsbGVlIiwiZW1pdCIsImFyZ3MiLCJ4IiwiRXZlbnQiLCJkZWZhdWx0YWN0aW9uIiwiZGVmYXVsdFByZXZlbnRlZCIsInByZXZlbnREZWZhdWx0IiwicnVuX2RlZmF1bHQiLCJhcnJheSIsIm9iamVjdCIsImRlZXBDbG9uZSIsImFyciIsIm5ld2FyciIsImkiLCJsZW5ndGgiLCJBcnJheSIsImlzQXJyYXkiLCJyZW1vdmUiLCJoYXNGdW5jdGlvbnMiLCJvYmoiLCJpdGVtIiwid2luZG93Iiwic3RydWN0dXJlZENsb25lIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwibmV3b2JqIiwid2lubyIsIk1vZCIsImluaXQiLCJNb2RBUElfQyIsImxvYWRlZCIsImhvb2tzIiwiR2V0TW9kIiwiYSIsImZpbmQiLCJFcnJvciIsIkdldE1vZEJ5TmFtZSIsIkdldE1vZHMiLCJMb2FkTW9kIiwibW9kIiwiJGFsZXJ0IiwibG1vZCIsIlJlcGxhY2VNb2QiLCJuZXdtb2QiLCJmaW5kSW5kZXgiLCJIb29rIiwiZnVuY3Rpb25fbmFtZSIsImV2ZW0iLCJvZ2Z1bmMiLCJmYXJncyIsIm5hcmdzIiwiZmV2ZW50IiwiZnVuY2FyZ3MiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJiaW5kIiwiRmlsdGVyTW9kcyIsInByZWZpeCIsImZpbHRlciIsInN0YXJ0c1dpdGgiLCJNb2RBUEkiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwiTUJMb2dnZXIiLCJDcmVhdGVMb2dnZXIiLCJMb2dnZXIiLCJnZXRUaW1lIiwiRGF0ZSIsImdldEhvdXJzIiwidG9TdHJpbmciLCJwYWRTdGFydCIsImdldE1pbnV0ZXMiLCJnZXRTZWNvbmRzIiwiaW5mbyIsIndhcm4iLCJ0cm9sbGJveCIsImxvZ2dlciIsInJlZ2lzdGVyZWRDb21tYW5kcyIsImV2IiwibXNnIiwic3Vic3RyIiwic3BsaXQiLCJjbWQiLCJzaGlmdCIsImluY2x1ZGVzIiwiY21kcyIsImMiLCJhbGlhc2VzIiwiZXhlY3V0ZSIsIlByaW50TWVzc2FnZSIsIm5pY2siLCJjb2xvciIsImhvbWUiLCJkYXRlIiwibm93IiwicHJpbnRNc2ciLCJSZWdpc3RlckNvbW1hbmQiLCJHZXRFbGVtZW50IiwidWllbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiR2V0U2VsZWN0b3IiLCJVSUVsZW1lbnQiLCJlbGVtZW50IiwiX2NoaWxkcmVuIiwiU2V0Q2hpbGRyZW4iLCJjaGlsZHMiLCJtYXAiLCJHZXQiLCJjaGlsZHJlbiIsImZyb21FbnRyaWVzIiwiVUkiLCJGb3JtIiwiTW9kU3RvcmFnZSIsIkdldFN0b3JhZ2UiLCJTdG9yYWdlRGF0YSIsIiRkYiIsIl8iLCJjb250ZW50IiwiU2V0Iiwic2V0IiwiUmVtb3ZlIiwiZGVsIiwiTGlzdCIsImtleXMiLCJtb2RzIiwicmVwbGFjZSIsIkNsZWFyIiwiTW9kQm94IiwiTW9kTG9hZGVyIiwibW9kTGlzdCIsIm1vZE5hbWUiLCJsb2FkZXJzIiwibG9hZGVyIiwibW9kYm94Il0sInNvdXJjZVJvb3QiOiIifQ==